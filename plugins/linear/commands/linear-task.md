---
name: linear-task
description: Single issue planning - analyze requirements, create implementation checklist
allowed-tools:
  - Read
  - Bash
  - Glob
  - Grep
  - AskUserQuestion
  - mcp__plugin_linear_linear__list_issues
  - mcp__plugin_linear_linear__get_issue
  - mcp__plugin_linear_linear__create_issue
  - mcp__plugin_linear_linear__update_issue
  - mcp__plugin_linear_linear__list_issue_statuses
  - mcp__plugin_linear_linear__list_issue_labels
  - mcp__plugin_linear_linear__list_projects
  - mcp__plugin_linear_linear__list_teams
  - mcp__plugin_linear_linear__get_team
  - mcp__plugin_linear_linear__list_cycles
argument-hint: "[이슈ID] [요구사항]"
---

# Linear Task: 단일 이슈 계획

사용자의 요구사항을 분석하여 구현 계획을 수립하고, 하나의 이슈에 체크리스트로 정리합니다.

**핵심 원칙: 1 이슈 = 1 브랜치 = 1 PR**

---

## 기본 원칙

### 아키텍처
- **클린 아키텍처** 기반 설계
- 의존성 역향 원칙(DIP) 준수
- 도메인 중심 설계

### 개발 방식
- **TDD**: 테스트 먼저 작성 후 구현
- Red → Green → Refactor 사이클
- 작은 단위로 커밋

---

## 클린 아키텍처 다이어그램

계획 수립 시 아키텍처 구조를 ASCII 다이어그램으로 시각화합니다:

```
┌─────────────────────────────────────────────────────────────┐
│                    Presentation Layer                        │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │
│  │   Screens   │  │  ViewModels │  │   Widgets   │          │
│  └─────────────┘  └─────────────┘  └─────────────┘          │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                     Domain Layer                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │
│  │  Use Cases  │  │  Entities   │  │  Repository │          │
│  │             │  │             │  │  Interface  │          │
│  └─────────────┘  └─────────────┘  └─────────────┘          │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      Data Layer                              │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │
│  │ Repository  │  │  Data       │  │   External   │          │
│  │   Impl      │  │  Sources    │  │    APIs      │          │
│  └─────────────┘  └─────────────┘  └─────────────┘          │
└─────────────────────────────────────────────────────────────┘

의존성 흐름: Presentation → Domain ← Data (역방향)
```

### 계층별职责

| 계층 | 역할 | 예시 |
|------|------|------|
| Presentation | UI, 사용자 입력 처리 | Screen, Widget, ViewModel |
| Domain | 비즈니스 로직, 규칙 | Use Case, Entity, Repository Interface |
| Data | 데이터 저장/조회 | Repository Impl, API Client, Local DB |

---

## 워크플로우 개요

```
요구사항 입력
    ↓
Phase 1: 분석 (코드베이스 + 요구사항)
    ↓
Phase 2: 명확화 (질문을 통한 보완)
    ↓
Phase 3: 계획 수립 (체크리스트 작성)
    ↓
Phase 4: 컨펌 & 이슈 등록
    ↓
/linear-dev로 작업 시작
```

---

## Phase 1: 분석

### Step 1. 입력 파악

**케이스 A: 이슈 ID가 주어진 경우**
```
get_issue(id: "{이슈ID}")
```
- 기존 이슈의 제목, description을 읽어 요구사항 파악
- 이슈를 수정하는 형태로 진행

**케이스 B: 요구사항만 주어진 경우**
- 사용자의 자연어 설명을 요구사항으로 사용
- 새 이슈를 생성하는 형태로 진행

### Step 2. 코드베이스 분석

프로젝트 구조를 파악하여 구현에 필요한 맥락을 수집합니다.

```bash
# 프로젝트 구조
ls -la

# 관련 파일 찾기
find . -type f -name "*.ts" -o -name "*.tsx" -o -name "*.py" | head -50
```

**분석 항목:**
- 프로젝트 아키텍처 (프론트엔드/백엔드 구조)
- 기존 유사 기능 (복사할 패턴 있는지)
- 관련 파일/디렉토리
- 사용 중인 라이브러리/프레임워크
- 데이터 모델/스키마

### Step 3. 요구사항 분해

요구사항을 기능 단위로 분해합니다:

```
## 요구사항 분석

**원문:** "{사용자 입력}"

**핵심 목표:**
- {목표 1}
- {목표 2}

**필요한 기능:**
1. {기능 1} - {설명}
2. {기능 2} - {설명}
3. {기능 3} - {설명}

**관련 코드:**
- {파일 경로 1} - {이유}
- {파일 경로 2} - {이유}

**불확실한 부분:**
- {질문 1}
- {질문 2}
```

---

## Phase 2: 명확화

### 질문 전략

불확실한 부분이 있으면 **반드시** AskUserQuestion으로 확인합니다.

**질문 유형:**

| 유형 | 예시 |
|------|------|
| 범위 확인 | "비밀번호 찾기 기능도 포함하나요?" |
| 기술 선택 | "상태 관리를 Context API vs Redux 중 어떤 걸로 할까요?" |
| 기존 패턴 | "기존 설정 페이지 스타일을 따르나요?" |
| 우선순위 | "필수 기능과 나중에 해도 되는 기능을 구분해드릴까요?" |
| 엣지 케이스 | "탈퇴 전 확인 모달이 필요한가요?" |

### 명확화 루프

불확실한 부분이 모두 해결될 때까지 질문을 반복합니다.

```
질문 → 답변 → 새로운 불확실성 발견? → 질문 → ...
```

최소 1번 이상의 질문을 통해 요구사항을 구체화합니다.

---

## Phase 3: 계획 수립

### Step 1. 구현 계획 작성

분석과 명확화 결과를 바탕으로 체크리스트를 작성합니다.

**계획 구조:**

```markdown
## {이슈 제목}

### 목표
{이 기능의 목표와 범위}

### 구현 체크리스트

**[준비]**
- [ ] {준비 항목}

**[핵심 기능]**
- [ ] {핵심 기능 1}
- [ ] {핵심 기능 2}

**[세부 기능]**
- [ ] {세부 항목 1}
- [ ] {세부 항목 2}

**[마무리]**
- [ ] 테스트 작성
- [ ] 에러 처리

### 기술 노트
- {구현 시 참고사항}
- {사용할 라이브러리/패턴}

### 관련 파일
- `{파일 경로}` - {용도}

### 고려사항
- {주의할 점}
```

### Step 2. 계획 검토

작성한 계획이 다음 기준을 충족하는지 확인:

| 기준 | 확인 사항 |
|------|----------|
| 완결성 | 누락된 기능이 없는가? |
| 구체성 | 각 항목이 명확히 이해되는가? |
| 실행 가능성 | 1~2일 내 완료 가능한 크기인가? |
| 의존성 | 항목 간 순서가 논리적인가? |

---

## Phase 4: 컨펌 & 이슈 등록

### Step 1. 최종 컨펌

작성한 계획을 사용자에게 보여주고 확인을 받습니다:

```
## 구현 계획

{작성된 계획 내용}

---

이 계획으로 이슈를 {생성/수정}할까요?

[확인] - 그대로 진행
[수정] - 변경사항 말씀해주세요
[취소] - 취소
```

### Step 2. 이슈 등록/수정

**새 이슈 생성:**
```
create_issue(
  title: "{이슈 제목}",
  team: "{팀}",
  project: "{프로젝트}" (선택),
  description: "{계획 내용}",
  priority: {우선순위},
  labels: [{라벨들}]
)
```

**기존 이슈 수정:**
```
update_issue(
  id: "{이슈ID}",
  description: "{계획 내용}"
)
```

### Step 3. 완료 요약

```
## 태스크 이슈 {생성/수정} 완료

| 항목 | 값 |
|------|-----|
| 이슈 | {이슈ID}: {제목} |
| 체크리스트 | {N}개 항목 |

`/linear-dev start {이슈ID}`로 작업을 시작하세요.
```

---

## 체크리스트 작성 가이드

### 항목 크기 기준

- 각 항목은 **30분~2시간** 내에 완료 가능한 크기
- **구체적**이고 **측정 가능**해야 함
- PR 리뷰어가 이해할 수 있는 단위

### 좋은 예시

```
- [ ] 사용자 설정 API 엔드포인트 구현 (GET /api/user/settings)
- [ ] 비밀번호 변경 폼 UI 컴포넌트 생성
- [ ] 탈퇴 확인 모달 구현 (되돌릴 수 없음 안내)
- [ ] 설정 변경 사항 실시간 저장
```

### 나쁜 예시

```
- [ ] 설정 기능 구현 (너무 모호)
- [ ] UI 만들기 (구체적이지 않음)
- [ ] 모든 것 완료 (측정 불가)
```

---

## linear-plan vs linear-task

| 구분 | linear-plan | linear-task |
|------|-------------|-------------|
| 용도 | 큰 기능, Epic | 중간 크기 태스크 |
| 이슈 구조 | 서브태스크로 분해 | 단일 이슈 + 체크리스트 |
| 브랜치 | 서브태스크별 생성 | 1개 |
| PR | 서브태스크별 생성 | 1개 |
| 추천 상황 | 1주+ 프로젝트 | 반나절~2일 작업 |

---

## 우선순위 번호

| 숫자 | 의미 |
|------|------|
| 0 | None |
| 1 | Urgent |
| 2 | High |
| 3 | Normal |
| 4 | Low |
